<ion-content>
  <div class="page-container p-0">
    <div class="page-header pl-3 pr-3">
      <button mat-icon-button class="back-btn" (click)="onBack()">
        <fa-icon class="fa-icon color-primary" icon="chevron-left"></fa-icon>
      </button>
      <h2 class="m-0 color-primary">{{CONSTANT.DOCUMENT_VERIFY_LABEL}}</h2>
    </div>
    <div class="page-body pl-3 pr-3">

      <div class="verify_doc" *ngIf="verifyType===verifyTypeEnum.SELFIE">

        <!-- Selfie -->
        <div class="ion-text-center" [class.mt-3]="documentList?.length">
          <p>
            <b>{{ CONSTANT.SELFIE }}</b>
          </p>
          <p class="gray-text">
            {{ CONSTANT.takeYourPhoto }}
          </p>
        </div>

        <div class="camera_btn selfie"
          [ngStyle]="{ 'background-image': 'url(' + attachments.frontImage.sourceFile?.webPath + ')' }"
          (click)="getPhoto('frontPage')">
          <ng-container *ngIf="attachments.frontImage.sourceFile?.webPath else takePhotoTmplt">
            <button mat-icon-button class="btn-delete" (click)="removePhoto($event, 'frontPage')">
              <small>
                <fa-icon class="fa-icon color-danger" icon="trash"></fa-icon>
              </small>
            </button>
          </ng-container>
        </div>
      </div>

      <div class="flex-column align-stretch mt-3 mb-3"
        *ngIf="verifyType===verifyTypeEnum.ID_VERIFY || verifyType===verifyTypeEnum.PAN">

        <mat-form-field appearance="outline" *ngIf="documentList?.length">
          <mat-label>{{CONSTANT.SELECT_DOCUMENT_LABEL}}</mat-label>
          <mat-select [(ngModel)]="documentType" (ngModelChange)="updateValidity()" required>
            <mat-option *ngFor="let doc of documentList" [value]="doc.value">{{doc.label}}</mat-option>
          </mat-select>
        </mat-form-field>

        <div *ngIf="verifyType !== verifyTypeEnum.ID_VERIFY || documentType">
          <!-- Front -->
          <div class="ion-text-center" [class.mt-3]="documentList?.length">
            <p>
              <b>{{ CONSTANT.FRONT_SIDE_LABEL }}</b>
            </p>
            <p class="gray-text">
              {{ CONSTANT.takePhotoLable('front', documentDisplayName) }}
            </p>
          </div>

          <div class="camera_btn"
            [ngStyle]="{ 'background-image': 'url(' + attachments.frontImage.sourceFile?.webPath + ')' }"
            (click)="getPhoto('frontPage')">
            <ng-container *ngIf="attachments.frontImage.sourceFile?.webPath else takePhotoTmplt">
              <button mat-icon-button class="btn-delete" (click)="removePhoto($event, 'frontPage')">
                <small>
                  <fa-icon class="fa-icon color-danger" icon="trash"></fa-icon>
                </small>
              </button>
            </ng-container>
          </div>

          <!-- Back -->
          <div class="ion-text-center mt-5">
            <p>
              <b>{{ CONSTANT.BACK_SIDE_LABEL }}</b>
            </p>
            <p class="gray-text">
              {{ CONSTANT.takePhotoLable('back', documentDisplayName) }}
            </p>
          </div>
          <div class="camera_btn"
            [ngStyle]="{ 'background-image': 'url(' + attachments.backImage.sourceFile?.webPath + ')' }"
            (click)="getPhoto('backPage')">
            <ng-container *ngIf="attachments.backImage.sourceFile?.webPath else takePhotoTmplt">
              <button mat-icon-button class="btn-delete" (click)="removePhoto($event, 'backPage')">
                <fa-icon class="fa-icon color-danger" icon="trash"></fa-icon>
              </button>
            </ng-container>
          </div>
        </div>

      </div>
      <button mat-flat-button color="primary" *ngIf="verifyType !== verifyTypeEnum.ID_VERIFY || documentType"
        [disabled]="!isValid" class="mt-3 mb-3 p-2" (click)="submit()">
        <fa-icon class="fa-icon mr-2" icon="check"></fa-icon>
        {{CONSTANT.VERIFY_LABEL}}
      </button>
    </div>

    <app-loading *ngIf="isSaving"></app-loading>

  </div>
</ion-content>


<ng-template #takePhotoTmplt>
  <fa-icon class="fa-icon color-primary camera_icon" icon="camera"></fa-icon>
</ng-template>
